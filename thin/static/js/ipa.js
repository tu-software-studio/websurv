// Generated by CoffeeScript 1.7.1

/*
  Created by akeenan on 4/10/14.
 */

(function() {
  var finishIPA, hideIPA, showIPA, toggleIPA;

  finishIPA = function() {
    return $("#ipa_buttons").stop(true, true);
  };

  showIPA = function() {
    return $("#ipa_buttons").show("slide", {
      direction: "down",
      duration: 500
    });
  };

  hideIPA = function() {
    return $("#ipa_buttons").hide("slide", {
      direction: "down",
      duration: 500
    });
  };

  toggleIPA = function() {
    return $("#ipa_buttons").toggle("slide", {
      direction: "down",
      duration: 500
    });
  };

  $(function() {
    var ipa_controller;
    ipa_controller = {
      current_input: null,
      set_up_buttons: function() {
        var button, button_div, button_divs, _i, _len, _results;
        button_divs = $("div.btn-toolbar");
        _results = [];
        for (_i = 0, _len = button_divs.length; _i < _len; _i++) {
          button_div = button_divs[_i];
          _results.push((function() {
            var _j, _len1, _ref, _results1;
            _ref = $(button_div).find("button");
            _results1 = [];
            for (_j = 0, _len1 = _ref.length; _j < _len1; _j++) {
              button = _ref[_j];
              button = $(button);
              _results1.push(button.click(function(e) {
                if (ipa_controller.current_input != null) {
                  ipa_controller.current_input.val(ipa_controller.current_input.val() + $.trim(e.target.innerHTML).replace(/&nbsp;/g, ""));
                  return ipa_controller.current_input.focus();
                } else {
                  return alert("No input set. Click on an text box to set the input.");
                }
              }));
            }
            return _results1;
          })());
        }
        return _results;
      },
      set_up_inputs: function() {
        $("body").on("focusin", "input:text:not([readonly])", function(e) {
          ipa_controller.current_input = $(e.target);
          finishIPA();
          return showIPA();
        });
        return $("body").on("focusout", "input:text", function(e) {
          ipa_controller.current_input = null;
          finishIPA();
          return hideIPA();
        });
      }
    };
    if (!$("body").attr("no-ipa")) {
      ipa_controller.set_up_buttons();
      ipa_controller.set_up_inputs();
    }
    return $("#ipa-toggle").click(function(e) {
      e.preventDefault();
      return toggleIPA();
    });
  });

}).call(this);
